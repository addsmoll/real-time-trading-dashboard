import{$ as de,$a as U,A as ce,B as ae,Ba as me,C as fe,Ca as ge,D as $,E as tt,F as ue,G as D,H as R,J as O,K as h,L as y,Lb as He,M as L,N as et,Na as Ee,Oa as Se,P as le,Pa as ve,Qa as ye,Ra as At,Sa as Re,T as pe,Ta as Oe,U as B,Ua as It,Va as Tt,Wa as Ae,Xa as Ie,Ya as Te,Za as Ce,_a as xe,a as C,ab as H,b as k,bb as Ct,c as K,cb as nt,d as Xt,db as be,eb as Me,f as Yt,fb as we,g as Jt,gb as Fe,h as J,hb as je,i as Qt,ib as Ne,j,ja as he,jb as xt,kb as rt,l as te,lb as De,m as v,mb as z,n as yt,nb as it,o as ee,ob as _e,p as P,pb as ke,q as T,qb as Z,r as N,rb as Pe,s as Rt,sb as bt,t as ne,tb as Ue,u as Q,ub as ze,v as re,vb as $e,w as ie,wb as Le,x as oe,y as Ot,z as se,zb as Be}from"./chunk-AACPEWRA.js";var Ge=[{path:"session/:id",loadComponent:()=>import("./chunk-AADMTQFJ.js").then(t=>t.SessionPageComponent)},{path:"",redirectTo:"session/1",pathMatch:"full"}];var X="PERFORM_ACTION",Nn="REFRESH",Je="RESET",Qe="ROLLBACK",tn="COMMIT",en="SWEEP",nn="TOGGLE_ACTION",Dn="SET_ACTIONS_ACTIVE",rn="JUMP_TO_STATE",on="JUMP_TO_ACTION",Bt="IMPORT_STATE",sn="LOCK_CHANGES",cn="PAUSE_RECORDING",G=class{constructor(n,e){if(this.action=n,this.timestamp=e,this.type=X,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Mt=class{constructor(){this.type=Nn}},wt=class{constructor(n){this.timestamp=n,this.type=Je}},Ft=class{constructor(n){this.timestamp=n,this.type=Qe}},jt=class{constructor(n){this.timestamp=n,this.type=tn}},Nt=class{constructor(){this.type=en}},Dt=class{constructor(n){this.id=n,this.type=nn}};var _t=class{constructor(n){this.index=n,this.type=rn}},kt=class{constructor(n){this.actionId=n,this.type=on}},Pt=class{constructor(n){this.nextLiftedState=n,this.type=Bt}},Ut=class{constructor(n){this.status=n,this.type=sn}},zt=class{constructor(n){this.status=n,this.type=cn}};var at=new O("@ngrx/store-devtools Options"),Ve=new O("@ngrx/store-devtools Initial Config");function an(){return null}var _n="NgRx Store DevTools";function kn(t){let n={maxAge:!1,monitor:an,actionSanitizer:void 0,stateSanitizer:void 0,name:_n,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,r=e.logOnly?{pause:!0,export:!0,test:!0}:!1,i=e.features||r||n.features;i.import===!0&&(i.import="custom");let o=Object.assign({},n,{features:i},e);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function qe(t,n){return t.filter(e=>n.indexOf(e)<0)}function fn(t){let{computedStates:n,currentStateIndex:e}=t;if(e>=n.length){let{state:i}=n[n.length-1];return i}let{state:r}=n[e];return r}function W(t){return new G(t,+Date.now())}function Pn(t,n){return Object.keys(n).reduce((e,r)=>{let i=Number(r);return e[i]=un(t,n[i],i),e},{})}function un(t,n,e){return k(C({},n),{action:t(n.action,e)})}function Un(t,n){return n.map((e,r)=>({state:ln(t,e.state,r),error:e.error}))}function ln(t,n,e){return t(n,e)}function pn(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function zn(t,n,e,r){let i=[],o={},u=[];return t.stagedActionIds.forEach((a,p)=>{let s=t.actionsById[a];s&&(p&&Ht(t.computedStates[p],s,n,e,r)||(o[a]=s,i.push(a),u.push(t.computedStates[p])))}),k(C({},t),{stagedActionIds:i,actionsById:o,computedStates:u})}function Ht(t,n,e,r,i){let o=e&&!e(t,n.action),u=r&&!n.action.type.match(r.map(p=>Ke(p)).join("|")),a=i&&n.action.type.match(i.map(p=>Ke(p)).join("|"));return o||u||a}function Ke(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dn(t){return{ngZone:t?y(pe):null,connectInZone:t}}var ft=(()=>{class t extends nt{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=le(t)))(i||t)}})()}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),ot={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},$t=new O("@ngrx/store-devtools Redux Devtools Extension"),hn=(()=>{class t{constructor(e,r,i){this.config=r,this.dispatcher=i,this.zoneConfig=dn(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,r){if(this.devtoolsExtension)if(e.type===X){if(r.isLocked||r.isPaused)return;let i=fn(r);if(pn(this.config)&&Ht(i,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let o=this.config.stateSanitizer?ln(this.config.stateSanitizer,i,r.currentStateIndex):i,u=this.config.actionSanitizer?un(this.config.actionSanitizer,e,r.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(u,o))}else{let i=k(C({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?Pn(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Un(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new K(e=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(i=>e.next(i)),r.unsubscribe}):J}createActionStreams(){let e=this.createChangesObservable().pipe(ae()),r=e.pipe(T(s=>s.type===ot.START)),i=e.pipe(T(s=>s.type===ot.STOP)),o=e.pipe(T(s=>s.type===ot.DISPATCH),v(s=>this.unwrapAction(s.payload)),Rt(s=>s.type===Bt?this.dispatcher.pipe(T(g=>g.type===xt),te(1e3),ne(1e3),v(()=>s),N(()=>j(s)),Q(1)):j(s))),a=e.pipe(T(s=>s.type===ot.ACTION),v(s=>this.unwrapAction(s.payload))).pipe(tt(i)),p=o.pipe(tt(i));this.start$=r.pipe(tt(i)),this.actions$=this.start$.pipe($(()=>a)),this.liftedActions$=this.start$.pipe($(()=>p))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let r={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(r.maxAge=e.maxAge),r}sendToReduxDevtools(e){try{e()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}static{this.\u0275fac=function(r){return new(r||t)(h($t),h(at),h(ft))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),ct={type:Ct},$n="@ngrx/store-devtools/recompute",Ln={type:$n};function mn(t,n,e,r,i){if(r)return{state:e,error:"Interrupted by an error up the chain"};let o=e,u;try{o=t(e,n)}catch(a){u=a.toString(),i.handleError(a)}return{state:o,error:u}}function st(t,n,e,r,i,o,u,a,p){if(n>=t.length&&t.length===o.length)return t;let s=t.slice(0,n),g=o.length-(p?1:0);for(let c=n;c<g;c++){let d=o[c],A=i[d].action,l=s[c-1],f=l?l.state:r,b=l?l.error:void 0,M=u.indexOf(d)>-1?l:mn(e,A,f,b,a);s.push(M)}return p&&s.push(t[t.length-1]),s}function Bn(t,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:W(ct)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Hn(t,n,e,r,i={}){return o=>(u,a)=>{let{monitorState:p,actionsById:s,nextActionId:g,stagedActionIds:c,skippedActionIds:d,committedState:A,currentStateIndex:l,computedStates:f,isLocked:b,isPaused:I}=u||n;u||(s=Object.create(s));function M(S){let E=S,_=c.slice(1,E+1);for(let x=0;x<_.length;x++)if(f[x+1].error){E=x,_=c.slice(1,E+1);break}else delete s[_[x]];d=d.filter(x=>_.indexOf(x)===-1),c=[0,...c.slice(E+1)],A=f[E].state,f=f.slice(E),l=l>E?l-E:0}function w(){s={0:W(ct)},g=1,c=[0],d=[],A=f[l].state,l=0,f=[]}let m=0;switch(a.type){case sn:{b=a.status,m=1/0;break}case cn:{I=a.status,I?(c=[...c,g],s[g]=new G({type:"@ngrx/devtools/pause"},+Date.now()),g++,m=c.length-1,f=f.concat(f[f.length-1]),l===c.length-2&&l++,m=1/0):w();break}case Je:{s={0:W(ct)},g=1,c=[0],d=[],A=t,l=0,f=[];break}case tn:{w();break}case Qe:{s={0:W(ct)},g=1,c=[0],d=[],l=0,f=[];break}case nn:{let{id:S}=a;d.indexOf(S)===-1?d=[S,...d]:d=d.filter(_=>_!==S),m=c.indexOf(S);break}case Dn:{let{start:S,end:E,active:_}=a,x=[];for(let vt=S;vt<E;vt++)x.push(vt);_?d=qe(d,x):d=[...d,...x],m=c.indexOf(S);break}case rn:{l=a.index,m=1/0;break}case on:{let S=c.indexOf(a.actionId);S!==-1&&(l=S),m=1/0;break}case en:{c=qe(c,d),d=[],l=Math.min(l,c.length-1);break}case X:{if(b)return u||n;if(I||u&&Ht(u.computedStates[l],a,i.predicate,i.actionsSafelist,i.actionsBlocklist)){let E=f[f.length-1];f=[...f.slice(0,-1),mn(o,a.action,E.state,E.error,e)],m=1/0;break}i.maxAge&&c.length===i.maxAge&&M(1),l===c.length-1&&l++;let S=g++;s[S]=a,c=[...c,S],m=c.length-1;break}case Bt:{({monitorState:p,actionsById:s,nextActionId:g,stagedActionIds:c,skippedActionIds:d,committedState:A,currentStateIndex:l,computedStates:f,isLocked:b,isPaused:I}=a.nextLiftedState);break}case Ct:{m=0,i.maxAge&&c.length>i.maxAge&&(f=st(f,m,o,A,s,c,d,e,I),M(c.length-i.maxAge),m=1/0);break}case xt:{if(f.filter(E=>E.error).length>0)m=0,i.maxAge&&c.length>i.maxAge&&(f=st(f,m,o,A,s,c,d,e,I),M(c.length-i.maxAge),m=1/0);else{if(!I&&!b){l===c.length-1&&l++;let E=g++;s[E]=new G(a,+Date.now()),c=[...c,E],m=c.length-1,f=st(f,m,o,A,s,c,d,e,I)}f=f.map(E=>k(C({},E),{state:o(E.state,Ln)})),l=c.length-1,i.maxAge&&c.length>i.maxAge&&M(c.length-i.maxAge),m=1/0}break}default:{m=1/0;break}}return f=st(f,m,o,A,s,c,d,e,I),p=r(p,a),{monitorState:p,actionsById:s,nextActionId:g,stagedActionIds:c,skippedActionIds:d,committedState:A,currentStateIndex:l,computedStates:f,isLocked:b,isPaused:I}}}var Ze=(()=>{class t{constructor(e,r,i,o,u,a,p,s){let g=Bn(p,s.monitor),c=Hn(p,g,a,s.monitor,s),d=P(P(r.asObservable().pipe(fe(1)),o.actions$).pipe(v(W)),e,o.liftedActions$).pipe(Qt(Jt)),A=i.pipe(v(c)),l=dn(s.connectInZone),f=new Yt(1);this.liftedStateSubscription=d.pipe(D(A),We(l),ce(({state:M},[w,m])=>{let S=m(M,w);return w.type!==X&&pn(s)&&(S=zn(S,s.predicate,s.actionsSafelist,s.actionsBlocklist)),o.notify(w,S),{state:S,action:w}},{state:g,action:null})).subscribe(({state:M,action:w})=>{if(f.next(M),w.type===X){let m=w.action;u.next(m)}}),this.extensionStartSubscription=o.start$.pipe(We(l)).subscribe(()=>{this.refresh()});let b=f.asObservable(),I=b.pipe(v(fn));Object.defineProperty(I,"state",{value:xe(I,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=b,this.state=I}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new G(e,+Date.now()))}refresh(){this.dispatch(new Mt)}reset(){this.dispatch(new wt(+Date.now()))}rollback(){this.dispatch(new Ft(+Date.now()))}commit(){this.dispatch(new jt(+Date.now()))}sweep(){this.dispatch(new Nt)}toggleAction(e){this.dispatch(new Dt(e))}jumpToAction(e){this.dispatch(new kt(e))}jumpToState(e){this.dispatch(new _t(e))}importState(e){this.dispatch(new Pt(e))}lockChanges(e){this.dispatch(new Ut(e))}pauseRecording(e){this.dispatch(new zt(e))}static{this.\u0275fac=function(r){return new(r||t)(h(ft),h(nt),h(je),h(hn),h(rt),h(B),h(be),h(at))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})();function We({ngZone:t,connectInZone:n}){return e=>n?new K(r=>e.subscribe({next:i=>t.run(()=>r.next(i)),error:i=>t.run(()=>r.error(i)),complete:()=>t.run(()=>r.complete())})):e}var Gn=new O("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Vn(t,n){return!!t||n.monitor!==an}function qn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function Kn(t){return t.state}function gn(t={}){return L([hn,ft,Ze,{provide:Ve,useValue:t},{provide:Gn,deps:[$t,at],useFactory:Vn},{provide:$t,useFactory:qn},{provide:at,deps:[Ve],useFactory:kn},{provide:De,deps:[Ze],useFactory:Kn},{provide:Ne,useExisting:ft}])}var yn="@ngrx/router-store/request",Lr=U(yn,H()),Gt="@ngrx/router-store/navigation",Br=U(Gt,H()),Vt="@ngrx/router-store/cancel",Hr=U(Vt,H()),qt="@ngrx/router-store/error",Gr=U(qt,H()),Rn="@ngrx/router-store/navigated",On=U(Rn,H());function An(t,n){let e=n;switch(e.type){case Gt:case qt:case Vt:return{state:e.payload.routerState,navigationId:e.payload.event.id};default:return t}}var ut=class{serialize(n){return{root:this.serializeRoute(n.root),url:n.url}}serializeRoute(n){let e=n.children.map(r=>this.serializeRoute(r));return{params:n.params,data:n.data,url:n.url,outlet:n.outlet,title:n.title,routeConfig:n.routeConfig?{path:n.routeConfig.path,pathMatch:n.routeConfig.pathMatch,redirectTo:n.routeConfig.redirectTo,outlet:n.routeConfig.outlet,title:typeof n.routeConfig.title=="string"?n.routeConfig.title:void 0}:null,queryParams:n.queryParams,fragment:n.fragment,firstChild:e[0],children:e}}},Kt=function(t){return t[t.PreActivation=1]="PreActivation",t[t.PostActivation=2]="PostActivation",t}(Kt||{}),Wn="router",En=new O("@ngrx/router-store Internal Configuration"),In=new O("@ngrx/router-store Configuration"),Zt=function(t){return t[t.Full=0]="Full",t[t.Minimal=1]="Minimal",t}(Zt||{});function Xn(t){return C({stateKey:Wn,serializer:ut,navigationActionTiming:Kt.PreActivation},t)}var lt=class{serialize(n){return{root:this.serializeRoute(n.root),url:n.url}}serializeRoute(n){let e=n.children.map(r=>this.serializeRoute(r));return{params:n.params,paramMap:n.paramMap,data:n.data,url:n.url,outlet:n.outlet,title:n.title,routeConfig:n.routeConfig?{component:n.routeConfig.component,path:n.routeConfig.path,pathMatch:n.routeConfig.pathMatch,redirectTo:n.routeConfig.redirectTo,outlet:n.routeConfig.outlet,title:n.routeConfig.title}:null,queryParams:n.queryParams,queryParamMap:n.queryParamMap,fragment:n.fragment,component:n.routeConfig?n.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:e[0],pathFromRoot:void 0,children:e}}},pt=class{},F=function(t){return t[t.NONE=1]="NONE",t[t.ROUTER=2]="ROUTER",t[t.STORE=3]="STORE",t}(F||{}),Sn=(()=>{class t{constructor(e,r,i,o,u,a){this.store=e,this.router=r,this.serializer=i,this.errorHandler=o,this.config=u,this.activeRuntimeChecks=a,this.lastEvent=null,this.routerState=null,this.trigger=F.NONE,this.stateKey=this.config.stateKey,!_e()&&ge()&&(a?.strictActionSerializability||a?.strictStateSerializability)&&this.serializer instanceof lt&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(it(this.stateKey),D(this.store)).subscribe(([e,r])=>{this.navigateIfNeeded(e,r)})}navigateIfNeeded(e,r){if(!e||!e.state||this.trigger===F.ROUTER||this.lastEvent instanceof At)return;let i=e.state.url;Yn(this.router.url,i)||(this.storeState=r,this.trigger=F.STORE,this.router.navigateByUrl(i).catch(o=>{this.errorHandler.handleError(o)}))}setUpRouterEventsListener(){let e=this.config.navigationActionTiming===Kt.PostActivation,r;this.router.events.pipe(D(this.store)).subscribe(([i,o])=>{this.lastEvent=i,i instanceof At?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==F.STORE&&(this.storeState=o,this.dispatchRouterRequest(i))):i instanceof Tt?(r=i,!e&&this.trigger!==F.STORE&&this.dispatchRouterNavigation(i)):i instanceof Oe?(this.dispatchRouterCancel(i),this.reset()):i instanceof It?(this.dispatchRouterError(i),this.reset()):i instanceof Re&&(this.trigger!==F.STORE&&(e&&this.dispatchRouterNavigation(r),this.dispatchRouterNavigated(i)),this.reset())})}dispatchRouterRequest(e){this.dispatchRouterAction(yn,{event:e})}dispatchRouterNavigation(e){let r=this.serializer.serialize(e.state);this.dispatchRouterAction(Gt,{routerState:r,event:new Tt(e.id,e.url,e.urlAfterRedirects,r)})}dispatchRouterCancel(e){this.dispatchRouterAction(Vt,{storeState:this.storeState,event:e})}dispatchRouterError(e){this.dispatchRouterAction(qt,{storeState:this.storeState,event:new It(e.id,e.url,`${e}`)})}dispatchRouterNavigated(e){let r=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(Rn,{event:e,routerState:r})}dispatchRouterAction(e,r){this.trigger=F.ROUTER;try{this.store.dispatch({type:e,payload:k(C({routerState:this.routerState},r),{event:this.config.routerState===Zt.Full?r.event:{id:r.event.id,url:r.event.url,urlAfterRedirects:r.event.urlAfterRedirects}})})}finally{this.trigger=F.NONE}}reset(){this.trigger=F.NONE,this.storeState=null,this.routerState=null}static{this.\u0275fac=function(r){return new(r||t)(h(z),h(Ie),h(pt),h(B),h(In),h(Me))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})();function Yn(t,n){return vn(t)===vn(n)}function vn(t){return t?.length>0&&t[t.length-1]==="/"?t.substring(0,t.length-1):t}function Tn(t={}){return L([{provide:En,useValue:t},{provide:In,useFactory:Xn,deps:[En]},{provide:pt,useClass:t.serializer?t.serializer:t.routerState===Zt.Full?lt:ut},et(()=>y(Sn)),Sn])}var dt=class{serialize(n){let e=n.root;for(;e.firstChild;)e=e.firstChild;return{url:n.url,params:e.params}}};var Jn={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},ht="__@ngrx/effects_create__";function Y(t,n={}){let e=n.functional?t:t(),r=C(C({},Jn),n);return Object.defineProperty(e,ht,{value:r}),e}function Qn(t){return Object.getOwnPropertyNames(t).filter(r=>t[r]&&t[r].hasOwnProperty(ht)?t[r][ht].hasOwnProperty("dispatch"):!1).map(r=>{let i=t[r][ht];return C({propertyName:r},i)})}function tr(t){return Qn(t)}function Cn(t){return Object.getPrototypeOf(t)}function er(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function xn(t){return typeof t=="function"}function nr(t){return t.filter(xn)}function rr(t,n,e){let r=Cn(t),o=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,u=tr(t).map(({propertyName:a,dispatch:p,useEffectsErrorHandler:s})=>{let g=typeof t[a]=="function"?t[a]():t[a],c=s?e(g,n):g;return p===!1?c.pipe(re()):c.pipe(se()).pipe(v(A=>({effect:t[a],notification:A,propertyName:a,sourceName:o,sourceInstance:t})))});return P(...u)}var ir=10;function bn(t,n,e=ir){return t.pipe(N(r=>(n&&n.handleError(r),e<=1?t:bn(t,n,e-1))))}var Mn=(()=>{class t extends K{constructor(e){super(),e&&(this.source=e)}lift(e){let r=new t;return r.source=this,r.operator=e,r}static{this.\u0275fac=function(r){return new(r||t)(h(rt))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function q(...t){return T(n=>t.some(e=>typeof e=="string"?e===n.type:e.type===n.type))}var si=new O("@ngrx/effects Internal Root Guard"),ci=new O("@ngrx/effects User Provided Effects"),ai=new O("@ngrx/effects Internal Root Effects"),fi=new O("@ngrx/effects Internal Root Effects Instances"),ui=new O("@ngrx/effects Internal Feature Effects"),li=new O("@ngrx/effects Internal Feature Effects Instance Groups"),or=new O("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>bn}),sr="@ngrx/effects/init",cr=U(sr);function ar(t,n){if(t.notification.kind==="N"){let e=t.notification.value;!fr(e)&&n.handleError(new Error(`Effect ${ur(t)} dispatched an invalid action: ${lr(e)}`))}}function fr(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function ur({propertyName:t,sourceInstance:n,sourceName:e}){let r=typeof n[t]=="function";return!!e?`"${e}.${String(t)}${r?"()":""}"`:`"${String(t)}()"`}function lr(t){try{return JSON.stringify(t)}catch{return t}}var pr="ngrxOnIdentifyEffects";function dr(t){return Wt(t,pr)}var hr="ngrxOnRunEffects";function mr(t){return Wt(t,hr)}var gr="ngrxOnInitEffects";function Er(t){return Wt(t,gr)}function Wt(t,n){return t&&n in t&&typeof t[n]=="function"}var wn=(()=>{class t extends Xt{constructor(e,r){super(),this.errorHandler=e,this.effectsErrorHandler=r}addEffects(e){this.next(e)}toActions(){return this.pipe(Ot(e=>er(e)?Cn(e):e),yt(e=>e.pipe(Ot(Sr))),yt(e=>{let r=e.pipe(oe(o=>vr(this.errorHandler,this.effectsErrorHandler)(o)),v(o=>(ar(o,this.errorHandler),o.notification)),T(o=>o.kind==="N"&&o.value!=null),ie()),i=e.pipe(Q(1),T(Er),v(o=>o.ngrxOnInitEffects()));return P(r,i)}))}static{this.\u0275fac=function(r){return new(r||t)(h(B),h(or))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Sr(t){return dr(t)?t.ngrxOnIdentifyEffects():""}function vr(t,n){return e=>{let r=rr(e,t,n);return mr(e)?e.ngrxOnRunEffects(r):r}}var yr=(()=>{class t{get isStarted(){return!!this.effectsSubscription}constructor(e,r){this.effectSources=e,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(r){return new(r||t)(h(wn),h(z))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Fn(...t){let n=t.flat(),e=nr(n);return L([e,et(()=>{y(we),y(Fe,{optional:!0});let r=y(yr),i=y(wn),o=!r.isStarted;o&&r.start();for(let u of n){let a=xn(u)?y(u):u;i.addEffects(a)}o&&y(z).dispatch(cr())})])}var mt=class t{http=y(ve);url="api/sessions";mockOffers=[{id:1,product:"BTC for",price:4e4,volume:.5,updatedAt:"2025-01-01T10:00:00.000Z"},{id:2,product:"ETH for",price:3e3,volume:2,updatedAt:"2025-01-01T10:00:00.000Z"},{id:3,product:"SOL for",price:150,volume:10,updatedAt:"2025-01-01T10:00:00.000Z"}];getOffers(n){return this.http.get(`${this.url}/${n}/oer`).pipe(v(()=>this.mockOffers),N(e=>j(this.mockOffers.filter(r=>r.id===+n))))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};var gt=class t{constructor(n){this.store=n}connected=!1;connect(n){this.connected=!0;let e=j({type:"STATUS",payload:"online"}),r=ee(500).pipe(T(()=>this.connected),D(this.store.pipe(it(Be))),v(([i,o])=>{let u=o.filter(g=>g.id.toString().includes(n));if(!u.length)return null;let a=Math.floor(Math.random()*u.length),p=C({},u[a]),s=(Math.random()*.02-.01)*p.price;return p.price=Math.round(Math.max(0,p.price+s)*100)/100,p.updatedAt=new Date().toISOString(),{type:"OFFER_UPDATED",payload:p}}),T(Boolean));return P(e,r)}disconnect(){this.connected=!1}static \u0275fac=function(e){return new(e||t)(h(z))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};var Et=class t{actions$=y(Mn);api=y(mt);ws=y(gt);routerEnterSession$=Y(()=>this.actions$.pipe(q(On),v(n=>n.payload.routerState.params?.id),T(n=>!!n),v(n=>Z({sessionId:n}))));enterSession$=Y(()=>this.actions$.pipe(q(Z),ue(()=>{this.ws.disconnect()}),v(({sessionId:n})=>Pe({offers:[]}))));loadOffers$=Y(()=>this.actions$.pipe(q(Z),$(({sessionId:n})=>this.api.getOffers(n).pipe(v(e=>bt({offers:e})),N(e=>j(Ue({error:e})))))));connectWs$=Y(()=>this.actions$.pipe(q(bt),D(this.actions$.pipe(q(Z))),$(([n,e])=>this.ws.connect(e.sessionId).pipe(v(r=>{switch(r.type){case"STATUS":return $e({status:r.payload});case"OFFER_UPDATED":return ze({offer:r.payload});default:return{type:"[WS] Unknown Event"}}}),N(()=>J)))));static \u0275fac=function(e){return new(e||t)};static \u0275prov=R({token:t,factory:t.\u0275fac})};var jn={providers:[me({eventCoalescing:!0}),ye(),Te(Ge),ke({router:An,session:Le}),gn({maxAge:25}),Tn({serializer:dt}),Fn(Et)]};var St=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=de({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){e&1&&he(0,"router-outlet")},dependencies:[Ee,Ce,Ae,He],encapsulation:2})};Se(St,jn).catch(t=>console.error(t));
